from django.contrib import admin
from exploits.models import WordpressExploit, JoomlaExploit, GeneralWebExploit
from django.contrib.admin import helpers
from django.template.response import TemplateResponse



class GeneralWebExploitAdmin(admin.ModelAdmin):
    #list_display = ['title', 'status']
    #ordering = ['title']
    
    def make_published(self, request, queryset):
        if request.POST.get('post'):
            # process the queryset here
            print "!!"
        else:
            print "??"
            context = {
                'title': ("Are you sure?"),
                'queryset': queryset,
                'action_checkbox_name': helpers.ACTION_CHECKBOX_NAME,
            }
            return TemplateResponse(request, 'templates/junk.html', context, current_app=self.admin_site.name)
    
    
    make_published.short_description = "Set exploit parameters"
    actions = [make_published]

admin.site.register(GeneralWebExploit, GeneralWebExploitAdmin)
admin.site.register(WordpressExploit)
admin.site.register(JoomlaExploit)
